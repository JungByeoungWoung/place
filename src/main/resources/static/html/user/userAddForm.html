<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <link href="../../css/bootstrap.min.css" rel="stylesheet">
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <style>
        .container {
            max-width: 560px;
        }
        .form-control {
            width: 85%;
        }
 </style>
</head>
<script>
  $(document).ready(function() {
    $("#checkId").click(function() {
      $("#registUser").attr("type","button");
      const status = $("#userID").attr('status'); //아이디 중복 체크 상태
      const id = $("#userID").val(); //입력 아이디 값
      $.ajax({
          type: "get",
          async: true,
          url: "http://localhost:8080/basic/user/checkId",
          data: {userID: id},
          success: function (data) {
            if(data == 1) {
              $("#checkMsg").html('<p style = "color:red">사용 불가능</p>');
              $("#registUser").attr("disabled", true);
            }else{
              $("#checkMsg").html('<p style = "color:blue">사용 가능</p>');
              $("#registUser").attr("disabled", false);
            }
         }
      })
    })
  });
</script>
<body>
<div class="container">
  <div class="py-5 text-center">
    <h2>유저 등록 폼</h2>
  </div>
  <form action="/basic/user/userResist" method="post">
    <div>
      <label for="userId">유저 ID</label>
      <input type="text" id="userID" name="userID" class="form-control" placeholder="유저아이디를 입력하세요">
    </div>
    <div id="checkMsg"></div>
    <div class="col">
      <button class="w-100 btn btn-primary btn-lg" id="checkId" type="button">중복 체크</button>
    </div>
    <div>
      <label for="userPwd">비밀번호</label>
      <input type="password" id="userPwd" name="userPwd" class="form-control" placeholder="비밀번호를 입력하세요">
    </div>
    <div class="error-Msg"></div>
    <div>
      <label for="userPwdcheck">비밀번호</label>
      <input type="password" id="userPwdcheck" name="userPwdcheck" class="form-control" placeholder="비밀번호확인">
    </div>
    <div>
      <label for="userName">유저명</label>
      <input type="text" id="userName" name="userName" class="form-control" placeholder="유저명을 입력하세요">
    </div>
    <div>
      <label for="email">email</label>
      <input type="text" id="email" name="email" class="form-control" placeholder="이메일을 입력하세요">
    </div>
    <div>
      <label for="address">주소</label>
      <input type="text" id="address" name="address" class="form-control" placeholder="주소를 입력하세요">
    </div>
    <hr class="my-4">
    <div class="row">
      <div class="col">
        <button class="w-100 btn btn-primary btn-lg" id="registUser" type="submit" disabled="disabled">유저 등록</button>
      </div>
      <div class="col">
        <button class="w-100 btn btn-secondary btn-lg" onclick="location.href='/'" type="button">취소</button>
      </div>
    </div>
  </form>
</div> <!-- /container -->
</body>
</html>